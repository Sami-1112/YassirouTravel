<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YassirouTravel - حجز الفنادق</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body class="bg-gray-100 text-gray-800">

    <header class="bg-white shadow-md py-4">
        <div class="container mx-auto flex justify-start items-center px-4"> <a href="../index.html" class="text-lg font-semibold text-emerald-600 hover:text-emerald-700 transition duration-300">
                <i class="fas fa-home ml-2"></i>العودة للصفحة الرئيسية
            </a>
        </div>
    </header>

    <main class="py-16">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-4xl font-bold mb-8 text-gray-900">حجز الفنادق</h1>
            <p class="text-lg text-gray-700 mb-8">
                ابحث عن أفضل الفنادق وأماكن الإقامة لرحلتك القادمة. املأ النموذج أدناه وسنتواصل معك بأفضل العروض.
            </p>

            <div class="max-w-xl mx-auto bg-white p-8 rounded-lg shadow-md">
                <form id="hotel-booking-form" class="space-y-6 text-right">
                    <div>
                        <label for="hotel-destination" class="block text-gray-700 text-sm font-bold mb-2">الوجهة:</label>
                        <input type="text" id="hotel-destination" name="destination" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="المدينة أو الدولة" required>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="check-in" class="block text-gray-700 text-sm font-bold mb-2">تاريخ الوصول:</label>
                            <input type="date" id="check-in" name="check_in_date" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                        </div>
                        <div>
                            <label for="check-out" class="block text-gray-700 text-sm font-bold mb-2">تاريخ المغادرة:</label>
                            <input type="date" id="check-out" name="check_out_date" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="num-adults" class="block text-gray-700 text-sm font-bold mb-2">عدد البالغين:</label>
                            <input type="number" id="num-adults" name="num_adults" min="1" value="1" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                        </div>
                        <div>
                            <label for="num-children" class="block text-gray-700 text-sm font-bold mb-2">عدد الأطفال (أقل من 12 سنة):</label>
                            <input type="number" id="num-children" name="num_children" min="0" value="0" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                        </div>
                    </div>
                    <div>
                        <label for="num-rooms" class="block text-gray-700 text-sm font-bold mb-2">عدد الغرف:</label>
                        <input type="number" id="num-rooms" name="num_rooms" min="1" value="1" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
                    </div>
                    <div>
                        <label for="hotel-name" class="block text-gray-700 text-sm font-bold mb-2">اسم الفندق المفضل (اختياري):</label>
                        <input type="text" id="hotel-name" name="hotel_name" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="مثال: فندق هيلتون">
                    </div>
                    <div>
                        <label for="hotel-notes" class="block text-gray-700 text-sm font-bold mb-2">ملاحظات إضافية (اختياري):</label>
                        <textarea id="hotel-notes" name="notes" rows="4" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="أي تفاصيل إضافية..."></textarea>
                    </div>
                    <button type="submit" class="bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-8 rounded-full transition duration-300 w-full whatsapp-btn">
                        أرسل طلب الحجز عبر الواتساب <i class="fab fa-whatsapp mr-2"></i>
                    </button>
                </form>
            </div>
        </div>
    </main>

    <footer class="bg-gray-900 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <div class="mb-4">
                <a href="#" class="text-gray-400 hover:text-white mx-3"><i class="fab fa-facebook-f text-xl"></i></a>
                <a href="#" class="text-gray-400 hover:text-white mx-3"><i class="fab fa-twitter text-xl"></i></a>
                <a href="#" class="text-gray-400 hover:text-white mx-3"><i class="fab fa-instagram text-xl"></i></a>
                <a href="#" class="text-gray-400 hover:text-white mx-3"><i class="fab fa-linkedin-in text-xl"></i></a>
            </div>
            <p>&copy; 2025 YassirouTravel. جميع الحقوق محفوظة.</p>
        </div>
    </footer>

    <button id="open-chat" class="fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none transition duration-300 z-40">
        <i class="fas fa-robot text-2xl"></i>
    </button>

    <div id="ai-chat-interface" class="hidden fixed bottom-20 right-6 bg-white w-80 h-96 rounded-lg shadow-xl flex flex-col z-50">
        <div class="bg-blue-600 text-white p-4 rounded-t-lg flex justify-between items-center">
            <h3 class="text-lg font-semibold">مساعد Yassirou الذكي</h3>
            <button id="close-chat" class="text-white hover:text-gray-200 focus:outline-none">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="chat-messages" class="flex-grow p-4 overflow-y-auto border-b border-gray-200 text-right">
            <div class="mb-2 text-gray-700">مرحباً! كيف يمكنني مساعدتك في رحلتك اليوم؟</div>
        </div>
        <div class="p-4 flex">
            <input type="text" id="chat-input" class="flex-grow p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="اكتب سؤالك هنا...">
            <button id="send-chat" class="bg-blue-600 text-white p-2 rounded-r-lg hover:bg-blue-700 focus:outline-none">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const whatsappNumber = '201019351945'; // رقم الواتساب الموحد الجديد

            // Set minimum dates for date inputs
            const today = new Date().toISOString().split('T')[0];
            const checkInInput = document.getElementById('check-in');
            const checkOutInput = document.getElementById('check-out');

            if (checkInInput && checkOutInput) {
                checkInInput.min = today;
                checkOutInput.min = today;

                // Update check-out min date when check-in date changes
                checkInInput.addEventListener('change', () => {
                    checkOutInput.min = checkInInput.value;
                    if (checkOutInput.value < checkInInput.value) {
                        checkOutInput.value = checkInInput.value;
                    }
                });

                // Set default dates (today for check-in, today + 7 days for check-out)
                const nextWeek = new Date();
                nextWeek.setDate(nextWeek.getDate() + 7);
                const nextWeekFormatted = nextWeek.toISOString().split('T')[0];
                
                checkInInput.value = today;
                checkOutInput.value = nextWeekFormatted;
            }


            // ------------------------------------
            // Hotel Booking Form Submission (for WhatsApp)
            // ------------------------------------
            const hotelBookingForm = document.getElementById('hotel-booking-form');
            if (hotelBookingForm) {
                hotelBookingForm.addEventListener('submit', function(event) {
                    event.preventDefault();

                    const destination = document.getElementById('hotel-destination').value;
                    const checkInDate = document.getElementById('check-in').value;
                    const checkOutDate = document.getElementById('check-out').value;
                    const numAdults = document.getElementById('num-adults').value;
                    const numChildren = document.getElementById('num-children').value;
                    const numRooms = document.getElementById('num-rooms').value;
                    const hotelName = document.getElementById('hotel-name').value;
                    const notes = document.getElementById('hotel-notes').value;

                    let whatsappMessage = `طلب حجز فندق:\n`;
                    whatsappMessage += `الوجهة: ${destination}\n`;
                    whatsappMessage += `تاريخ الوصول: ${checkInDate}\n`;
                    whatsappMessage += `تاريخ المغادرة: ${checkOutDate}\n`;
                    whatsappMessage += `عدد البالغين: ${numAdults}\n`;
                    whatsappMessage += `عدد الأطفال: ${numChildren}\n`;
                    whatsappMessage += `عدد الغرف: ${numRooms}\n`;
                    if (hotelName) whatsappMessage += `اسم الفندق المفضل: ${hotelName}\n`;
                    if (notes) whatsappMessage += `ملاحظات: ${notes}\n`;

                    const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(whatsappMessage)}`;
                    window.open(whatsappUrl, '_blank');
                });
            }

            // ------------------------------------
            // AI Travel Assistant (Client-Side only - Backend integration needed for real AI)
            // ------------------------------------
            const openChatButton = document.getElementById('open-chat');
            const closeChatButton = document.getElementById('close-chat');
            const aiChatInterface = document.getElementById('ai-chat-interface');
            const chatInput = document.getElementById('chat-input');
            const sendChatButton = document.getElementById('send-chat');
            const chatMessagesContainer = document.getElementById('chat-messages');

            if (openChatButton) {
                openChatButton.addEventListener('click', () => {
                    aiChatInterface.classList.remove('hidden');
                });
            }
            if (closeChatButton) {
                closeChatButton.addEventListener('click', () => {
                    aiChatInterface.classList.add('hidden');
                });
            }

            if (sendChatButton && chatInput && chatMessagesContainer) {
                sendChatButton.addEventListener('click', sendMessage);
                chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });

                function sendMessage() {
                    const userMessage = chatInput.value.trim();
                    if (userMessage === '') return;

                    const userMessageDiv = document.createElement('div');
                    userMessageDiv.classList.add('mb-2', 'text-left', 'text-blue-800', 'p-2', 'bg-blue-100', 'rounded-lg', 'inline-block', 'max-w-[80%]');
                    userMessageDiv.textContent = userMessage;
                    chatMessagesContainer.appendChild(userMessageDiv);
                    chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;

                    chatInput.value = '';

                    setTimeout(() => {
                        const aiResponseDiv = document.createElement('div');
                        aiResponseDiv.classList.add('mb-2', 'text-right', 'text-gray-700', 'p-2', 'bg-gray-200', 'rounded-lg', 'inline-block', 'max-w-[80%]');
                        
                        let aiResponseText = '';
                        if (userMessage.includes('أسعار العمرة') || userMessage.includes('عمرة')) {
                            aiResponseText = 'لمعرفة تفاصيل برامج العمرة، يرجى زيارة صفحة برامج الحج والعمرة من خلال "خدماتنا" أو التواصل معنا مباشرة.';
                        } else if (userMessage.includes('حج')) {
                            aiResponseText = 'لمعلومات عن برامج الحج، يرجى زيارة صفحة برامج الحج والعمرة أو التواصل معنا مباشرة للحصول على أحدث التفاصيل.';
                        } else if (userMessage.includes('حجز طيران') || userMessage.includes('طيران')) {
                            aiResponseText = 'لحجز الطيران، يرجى زيارة صفحة حجز الطيران الخاصة بنا لملء النموذج وإرسال استفساركم.';
                        } else if (userMessage.includes('حجز فندق') || userMessage.includes('فندق')) {
                            aiResponseText = 'لحجز الفنادق، يرجى زيارة صفحة حجز الفنادق الخاصة بنا لملء النموذج وإرسال استفساركم.';
                        } else if (userMessage.includes('تأشيرة') || userMessage.includes('فيزا')) {
                            aiResponseText = 'لخدمات التأشيرات، يرجى زيارة صفحة خدمات التأشيرات الخاصة بنا لملء النموذج وإرسال استفساركم.';
                        } else if (userMessage.includes('شكرا') || userMessage.includes('شكراً')) {
                            aiResponseText = 'العفو! يسعدنا خدمتك دائماً في YassirouTravel. هل يمكنني المساعدة في أي شيء آخر؟';
                        } else {
                            aiResponseText = 'مرحباً بك! أنا مساعدك الذكي في YassirouTravel. كيف يمكنني مساعدتك اليوم؟ يمكنك أن تسأل عن برامج العمرة، الحج، الرحلات السياحية، حجز الطيران، الفنادق، أو التأشيرات. (هذه إجابة تجريبية، لخدمة AI كاملة تحتاج لربط خادم).';
                        }
                        aiResponseDiv.textContent = aiResponseText;
                        chatMessagesContainer.appendChild(aiResponseDiv);
                        chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
                    }, 1000);
                }
            }
        });
    </script>
</body>
</html>